var vm=new Vue({
	el:"#app",
	data:{
		topAd:[],
		topModule:[],
		topBusiness:[],
		groupBuy:[],
		middleBusiness:[],
		footerBusiness:[],
		item:{},
		topic:{},
		isClass:true,
		urlList:{
			b:"../business/modulelist.html?mid=",
			c:"../course/modulelist.html?mid=",
			groupBuy_module:"../groupbuy/modulelist.html?mid=",			
			si:"../site/modulelist.html?mid=",
			se:"../service/modulelist.html?mid="
		}	
		,url:""
	},
	mounted:function(){
		this.$nextTick(function(){
			var _this=this;		
			this.$http.get(interfaceUrl+'/live/getTopAdSlot',{userID:userInfo.userID,buildingID:userInfo.buildingID}).then(function(res){
				if(validateCode(res.data.code,res.data.message)){
					_this.topAd=res.data.data;
					_this.init();
				}
				
			});			
			this.$http.get(interfaceUrl+'/live/getTopModule',{userID:userInfo.userID,buildingID:userInfo.buildingID}).then(function(res){
				if(validateCode(res.data.code,res.data.message)){
				_this.topModule=res.data.data;				
				}
				
			});
			this.$http.get(interfaceUrl+'/live/getTopBusiness',{userID:userInfo.userID,buildingID:userInfo.buildingID}).then(function(res){
                 if(validateCode(res.data.code,res.data.message)){
				_this.topBusiness=res.data.data;}				
			});
			this.$http.get(interfaceUrl+'/live/getGroupBuy',{userID:userInfo.userID,buildingID:userInfo.buildingID}).then(function(res){
				if(validateCode(res.data.code,res.data.message)){
					_this.groupBuy=res.data.data;
				   _this.item=_this.groupBuy[0];
				}
				
			});
			this.$http.get(interfaceUrl+'/live/getMiddleBusiness',{userID:userInfo.userID,buildingID:userInfo.buildingID}).then(function(res){
			if(validateCode(res.data.code,res.data.message)){
				_this.middleBusiness=res.data.data;}
				
			});
			this.$http.get(interfaceUrl+'/live/getFooterBusiness',{userID:userInfo.userID,buildingID:userInfo.buildingID}).then(function(res){
				if(validateCode(res.data.code,res.data.message)){
				_this.footerBusiness=res.data.data;}
				
				
			});
			this.$http.get(interfaceUrl+'/live/getTopic',{userID:userInfo.userID,buildingID:userInfo.buildingID}).then(function(res){
				if(validateCode(res.data.code,res.data.message)){
				_this.topic=res.data.data;}	
			});
            
		})

	}
	,

	methods:{
		init:function(){
			$('#myCarousel').carousel({
				//自动4秒播放
				interval: 3000,
			});
            var myElement= document.getElementById('myCarousel')
            var hm=new Hammer(myElement);
            hm.on("swipeleft",function(){
                $('#myCarousel').carousel('next')
            })
            hm.on("swiperight",function(){
                $('#myCarousel').carousel('prev')
            })

			
		}
	,jump:function(item){
		var a=this.urlList;
		
		switch(item.prodType)
		{
			case "0":
       window.location.href=a.b+item.moduleID;
			break;
			case "1":
        window.location.href=a.se+item.moduleID;

			break;
			case "2":
		window.location.href=a.c+item.moduleID;

			break;
			case "3":
        window.location.href=a.si+item.moduleID+'&id='+'2eb042c512014a89a867c439089af071';

			break;
			
		}
	}
	
	}
	
})
