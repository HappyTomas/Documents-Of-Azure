<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>确认订单</title>
    <!-- Bootstrap -->
    <link href="../../css/bootstrap.css" rel="stylesheet">
    <link href="../../css/main.css" rel="stylesheet">
    <link href="../../css/common.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- page -->
    <link href="../../css/cursom/business.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../../css/cursom/model.css" />
    <style type="text/css">
        a {
            color: black;
        }
        input {
		
			border-radius: 2px;
			border: none;
			width:93%;
		}
		
		input:focus {
			outline: none;
			border-color: none;
			box-shadow: none;
			border-radius: 1px;
		}
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <div class="grey_top">
            <a href="#" class="green_back" onclick="javascript :history.go(-1)"></a>
            确认订单
        </div>
        <div class="order_whitebox">
            <div class="plr10">
                <div class="goods_receipt clearfix">
                    <div class="fl">
                        <p>收货人：<span>{{order.contactPerson}}</span><span class="plr10">{{order.contactPhone}}</span></p>
                        <p style="width:90%;">收货地址：{{order.contactAddress}}</p>
                    </div>
                    <div class="list_inbtn mt10" data-toggle="modal" data-target="#myModal_address"></div>
                </div>
            </div>
        </div>
        <div class="order_whitebox">
            <div class="plr10">
                <div class="goods_receipt clearfix">
                    <div class="fl">配送时间</div>
                    <div class="list_inbtn fr" data-toggle="modal" data-target="#timeModal"></div>
                    <div class="fr">{{deliveryDate.label}}</div>
                </div>
            </div>
        </div>
        <div class="line_ec mt10"></div>
        <div class="order_whitebox">
            <div class="plr10">
                <strong>{{order.businessName}}</strong>
            </div>
        </div>
        <div class="plr10 sort_list" v-for="commodity in order.commodities">
            <div class="goods_list">
                <div class="goods_pic">
                    <img v-bind:src="commodity.commodityImage">
                </div>
                <div class="goods_right">
                    <div class="goods_name oneLine">{{commodity.commodityName}}</div>
                    <div class="">
                        <div class="fl">
                            <div class="font22 mt10">&times;{{commodity.commodityNumber}}</div>
                        </div>
                        <div class="goods_num fr">{{commodity.commodityPrice | formatDecimal}}</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="order_whitebox">
            <div class="plr10">
                <div class="goods_receipt clearfix">
                    <div class="fl">配送费</div>
                    <div class="fr">{{order.deliveryFee | formatDecimal}}</div>
                </div>
            </div>
        </div>
        <div class="order_whitebox" v-if="order.activityDiscounted > 0">
            <div class="plr10">
                <div class="goods_receipt clearfix">
                    <div class="fl">活动优惠</div>
                    <div class="fr">-{{order.activityDiscounted | formatDecimal}}</div>
                </div>
            </div>
        </div>
        <div class="line_ec mt10"></div>
        <div class="order_whitebox">
            <!--v-if="order.coupons && order.coupons.length > 0"-->
            <div class="plr10">
                <div class="goods_receipt clearfix">
                    <div class="fl">优惠券</div>
                    <div v-if="isOK">
                       <div class="list_inbtn fr"></div>
                       <div class="fr font_orange" >无可用优惠券</div>
                    </div>
                    <div v-else>
                       <div class="list_inbtn fr" data-toggle="modal" data-target="#couponModal" v-if="!isOK"></div>
                       <div class="fr font_orange" v-if="couponDiscounted>0">-{{couponDiscounted | formatDecimal}}</div>          
                       <div class="fr font_orange" v-else>{{num}}张优惠券可用</div>                  	
                    </div>
                   

                </div>
            </div>
        </div>
        <div class="order_whitebox">
            <div class="plr10">
                <div class="goods_receipt clearfix">
						<div><div class="fl">您的留言：</div><input type="text"  class="input" v-model="leaveMessage" ></div>
                    
                    <div class="fr font_orange"></div>
                </div>
            </div>
        </div>
        <!--<div class="ts_txt">满20减2，还差5元</div>-->
        <div class="business_bottom">
            <span class=" ft14" style="line-height:44px;">
                待支付：<font class="font_orange">{{(order.totalMoney-order.activityDiscounted-couponDiscounted)|formatDecimal}}</font>
            </span>
            <span class="ft12" v-if="(order.activityDiscounted + couponDiscounted)>0">
                优惠：<font class="font_orange">{{(order.activityDiscounted + couponDiscounted) | formatDecimal}}</font>
            </span>
            <div class="business_zbtn"><a href="#" v-on:click="submitOrder()">去结算</a></div>
        </div>
        <!--选择地址-->
        <div class="modal modal_c" id="myModal_address" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-dialog_c" role="document">
                <div class="modal-content modal-content_c">
                    <div class="modal-header" style="background:#F8F8F8;">
                        <h4 class="modal-title center_c" id="myModalLabel">
                            <span class="glyphicon glyphicon-menu-left line_c font_c" data-dismiss="modal"></span>选择地址
                        </h4>
                    </div>
                    <div class="modal-body modal-body_c">
                        <div id="place1_ad" v-for="address in addressList">
                            <div class="count_1_ad">
                                <div class="fl" style="margin:7px 0px;">
                                    <img v-bind:src="address.isSelected==0?urlList.checkicon:urlList.checkedicon" v-on:click="changeAddress(address)">
                                </div>
                                <div class="fl" style="margin:0px 10px;">
                                    <div>
                                        <span>{{address.contactPerson}}</span>
                                        <span class="fr margin_ad">{{address.contactPhone}}</span>
                                    </div>
                                    <div>{{address.address}}</div>
                                </div>
                                <div class="fr">
                                    <!--<div class="fl" style="margin:5px 5px;">
                                        <img src="../../images/business/05.png">
                                    </div>-->
                                    <div class="fl" style="margin:8px 0px;">
                                        <span class="glyphicon glyphicon-edit"></span><a href="#">编辑</a>
                                    </div>
                                </div>
                                <div class="clear"></div>
                            </div>
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>
            </div>
            <div class="business_bottom">
                <div class="ser_zbtn "><a href='#'>新增地址</a></div>
            </div>
        </div>
        <!--配送时间-->
        <div id="timeModal" class="modal fade" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title fontcenter">选择配送时间</h4>
                    </div>
                    <div class="modal-body nopadding">
                        <div class="business_mainmenu2" style="border-top:none;">
                            <ul>
                                <li v-for="(delivery,index) in order.deliveryDate" v-bind:class="index==0?'selected':''" v-on:click="changeDelivery(delivery)">
                                    <a href="#">{{delivery.desc}}</a>
                                </li>
                            </ul>
                        </div>
                        <div class="business_goods_box">
                            <div class="businessmenu_choice2 colorbg" v-for="period in timePeriod" v-if="period.isImmediate" v-on:click="timeSelected(period)">立即配送（预计{{period.end}}送达）</div>
                            <div class="plr10">
                                <div class="Selection_time_m">
                                    <ul>
                                        <li v-for="period in timePeriod" v-if="!period.isImmediate"><a href="#" v-on:click="timeSelected(period)">{{period.start}}~{{period.end}}</a></li>
                                    </ul>
                                    <div class="clear"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--优惠券-->
        <div id="couponModal" class="modal modal_c" tabindex="-1" role="dialog" style="padding-left:0px;">
            <div class="modal-dialog modal-dialog_c" role="document">
                <div class="modal-content modal-content_c">
                    <div class="modal-header modal-header_coupon" >
                        <h4 class="modal-title center_c "><span class="glyphicon glyphicon-menu-left line_c font_c" data-dismiss="modal" aria-label="Close"></span>选择优惠券</h4>
                    </div>
                    <div class="modal-body modal-body_c bg_de">
                        <div class="details_spgm" style="background:white;">
                            <div class="details_spgm_right_2" v-on:click="changeCoupon()">
                                <img v-bind:src="couponDiscounted==0?urlList.checkedicon:urlList.checkicon">
                            </div>
                            <div class="details_spgm_left_2" id="title_cou">不使用优惠券</div>
                            <div class="clear"></div>
                        </div>
                        <div class="choose_coup_title"><a href="#" style="color:red;">优惠券使用说明</a></div>
                        <div class="choose_coup_main"      v-for="(coup,index) in order.coupons"      v-bind:data-id="coup.couponID">
                            <div class="choose_coup_main_left">
                                <p v-if="coup.couponType == '0'">
                                    <font class="font_orange">{{coup.couponMoney|formatDecimal}}</font><br>
                                    <span>{{coup.couponCondition}}</span>
                                </p>
                                <p v-else>
                                    <font class="font_orange">{{coup.couponMoney/10}}折</font><br>
                                    <span>{{coup.couponCondition}}</span>
                                </p>
                            </div>
                            <div class="choose_coup_main_m"><img src="../../images/03.png" width="12" height="100"></div>
                            <div class="choose_coup_main_right">
                                <span v-on:click="changeCoupon(coup)">
                                    <img v-bind:src="coup.isSelected==0?urlList.checkicon:urlList.checkedicon" width="24" height="24">
                                </span>
                                <p>
                                    <font style="font-size:18px;">{{coup.couponName}}</font>
                                </p>
                                <p>
                                    <font class="font14">限{{coup.limitUser}}用户使用</font>
                                </p>
                                <p>
                                    <font class="font14">限{{coup.couponStart}}至{{coup.couponEnd}}</font>
                                </p>
                            </div>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="../../js/static/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../../js/static/bootstrap.min.js"></script>
    <script src="../../js/static/vue.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/static/vue-resource.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/static/layer.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/cursom/common/common.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/cursom/business/commodityorder.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
        $(function () {
            $("#choose").click(function () {
                $(".chooseTime").css("display", "block")
            })
        })
    </script>
</body>
</html>